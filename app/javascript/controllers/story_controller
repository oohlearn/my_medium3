
import axios from "axios"
import { Controller } from "stimulus";

export default class extends Controller {
  static targets = ["clapCount"];

  addClap(event) {
    event.preventDefault()
    let slug = event.currentTarget.dataset.slug
    let target = this.clapCountTarget
    // console.log("go")
    axios.post(`/stories/${slug}/clap`)
        .then(function(response){
        let status = response.data.status
        switch (status) {
          case "sign_in_first":
            alert("你必須先登入")
            break
          default:
            target.innerHTML = status
        }
        })
        .catch(function(error){
        console.log(error)
        })
    }
}
